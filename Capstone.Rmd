---
title: "Capstone Project"
author: "Eric Kao"
date: "March 26, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(dplyr)
library(plyr)
#preload all the dataframe
df1 <-read.csv('student-mat.csv')
df2 <-read.csv('student-por.csv')

d3=merge(df1,df2,by=c("school","sex","age","address","famsize","Pstatus","Medu","Fedu","Mjob","Fjob","reason","nursery","internet"))



```

## Student Alcohol Consumption

**Student Alcohol Consumption** dataset is what I decided for my springboard capstone project. You can find the original dataset at [here](https://www.kaggle.com/uciml/student-alcohol-consumption)

Let's take a first look of the dataset.

```{r}
df1
str(df2)


```

## Including Plots

cleaning data

```{r}
library(ggplot2)
df2<-df2%>%mutate(grade_mean=(G1+G2+G3)/3)
df1<-df1%>%mutate(grade_mean=(G1+G2+G3)/3)


```

```{r}
df1$Dalc <- mapvalues(df1$Dalc, 
                              from = 1:5, 
                              to = c("Very Low", "Low", "Medium", "High", "Very High"))
df2$Dalc <- mapvalues(df2$Dalc, 
                              from = 1:5, 
                              to = c("Very Low", "Low", "Medium", "High", "Very High"))
base1<-ggplot(df1,aes(x=Dalc,y=grade_mean,col=sex))
```


```{r}
base1+geom_point()
```

```{r}
base1+geom_jitter()+ggtitle("Student distribution dotplot based on Workday alcohol consumption")+labs(x="Workday Alcohol Consumption")
```

```{r}
base1+geom_boxplot()+facet_grid(.~Dalc)+ggtitle("Student boxplot based on Workday alcohol consumption")

```


check grade by sex and Dalc
```{r}
base1_G1<-ggplot(df1,aes(x=Dalc,y=G1,col=sex))
base1_G2<-ggplot(df1,aes(x=Dalc,y=G2,col=sex))
base1_G3<-ggplot(df1,aes(x=Dalc,y=G3,col=sex))
base1_class_sex<-ggplot(df1,aes(x=school, col=sex))

```

```{r}
base1_class_sex+geom_bar(aes(fill=sex),stat="count",position = 'fill')+ggtitle("Gender Proportion of each group")

```
Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.



```{r}

#why this is not woring in here
base1_class_sex<-ggplot(df1,aes(x=school, col=sex))
base1_class_sex+geom_bar(aes(fill=sex),stat="count",position = "fill")+facet_grid(.~Dalc)+ggtitle("Gender Proportion of each group")

```
